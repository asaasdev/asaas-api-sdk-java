// This file was generated by liblab | https://liblab.com/

package com.asaas.sdk.asaasjavasdk.services;

import com.asaas.sdk.asaasjavasdk.config.AsaasSdkConfig;
import com.asaas.sdk.asaasjavasdk.exceptions.ApiError;
import com.asaas.sdk.asaasjavasdk.exceptions.ApiErrorResponseDto;
import com.asaas.sdk.asaasjavasdk.http.Environment;
import com.asaas.sdk.asaasjavasdk.http.HttpMethod;
import com.asaas.sdk.asaasjavasdk.http.ModelConverter;
import com.asaas.sdk.asaasjavasdk.http.util.RequestBuilder;
import com.asaas.sdk.asaasjavasdk.models.ApiErrorResponseDtoModel;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentBillingInfoResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentCustodyGetResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentDeleteResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentGetResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentIdentificationFieldResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentLimitsResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentListResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentPathIdRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentPayWithCreditCardRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentPixQrCodeResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentReceiveInCashRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentRefundRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentSaveRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentSaveWithCreditCardRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentSimulateRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentSimulateResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentStatusResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentUpdateRequestDto;
import com.asaas.sdk.asaasjavasdk.models.ApiPaymentViewingInfoResponseDto;
import com.asaas.sdk.asaasjavasdk.models.ListPaymentsParameters;
import com.asaas.sdk.asaasjavasdk.validation.ViolationAggregator;
import com.asaas.sdk.asaasjavasdk.validation.exceptions.ValidationException;
import com.asaas.sdk.asaasjavasdk.validation.validators.modelValidators.ListPaymentsParametersValidator;
import com.fasterxml.jackson.core.type.TypeReference;
import java.util.Optional;
import java.util.concurrent.CompletableFuture;
import lombok.NonNull;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;

/**
 * PaymentService Service
 */
public class PaymentService extends BaseService {

  public PaymentService(@NonNull OkHttpClient httpClient, AsaasSdkConfig config) {
    super(httpClient, config);
  }

  /**
   * List payments
   *
   * @return response of {@code ApiPaymentListResponseDto}
   */
  public ApiPaymentListResponseDto listPayments() throws ApiError, ValidationException {
    return this.listPayments(ListPaymentsParameters.builder().build());
  }

  /**
   * List payments
   *
   * @param requestParameters {@link ListPaymentsParameters} Request Parameters Object
   * @return response of {@code ApiPaymentListResponseDto}
   */
  public ApiPaymentListResponseDto listPayments(@NonNull ListPaymentsParameters requestParameters)
    throws ApiError, ValidationException {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildListPaymentsRequest(requestParameters);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentListResponseDto>() {});
  }

  /**
   * List payments
   *
   * @return response of {@code CompletableFuture<ApiPaymentListResponseDto>}
   */
  public CompletableFuture<ApiPaymentListResponseDto> listPaymentsAsync() throws ApiError, ValidationException {
    return this.listPaymentsAsync(ListPaymentsParameters.builder().build());
  }

  /**
   * List payments
   *
   * @param requestParameters {@link ListPaymentsParameters} Request Parameters Object
   * @return response of {@code CompletableFuture<ApiPaymentListResponseDto>}
   */
  public CompletableFuture<ApiPaymentListResponseDto> listPaymentsAsync(
    @NonNull ListPaymentsParameters requestParameters
  ) throws ApiError, ValidationException {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildListPaymentsRequest(requestParameters);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentListResponseDto>() {})
    );
  }

  private Request buildListPaymentsRequest(@NonNull ListPaymentsParameters requestParameters)
    throws ValidationException {
    new ViolationAggregator()
      .add(new ListPaymentsParametersValidator("requestParameters").optional().validate(requestParameters))
      .validateAll();
    RequestBuilder builder = new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setOptionalQueryParameter("installment", requestParameters.getInstallment())
      .setOptionalQueryParameter("offset", requestParameters.getOffset())
      .setOptionalQueryParameter("limit", requestParameters.getLimit())
      .setOptionalQueryParameter("customer", requestParameters.getCustomer())
      .setOptionalQueryParameter("customerGroupName", requestParameters.getCustomerGroupName())
      .setOptionalQueryParameter("subscription", requestParameters.getSubscription())
      .setOptionalQueryParameter("externalReference", requestParameters.getExternalReference())
      .setOptionalQueryParameter("paymentDate", requestParameters.getPaymentDate())
      .setOptionalQueryParameter("estimatedCreditDate", requestParameters.getEstimatedCreditDate())
      .setOptionalQueryParameter("pixQrCodeId", requestParameters.getPixQrCodeId())
      .setOptionalQueryParameter("anticipated", requestParameters.getAnticipated())
      .setOptionalQueryParameter("anticipable", requestParameters.getAnticipable())
      .setOptionalQueryParameter("dateCreated[ge]", requestParameters.getDateCreatedGe())
      .setOptionalQueryParameter("dateCreated[le]", requestParameters.getDateCreatedLe())
      .setOptionalQueryParameter("paymentDate[ge]", requestParameters.getPaymentDateGe())
      .setOptionalQueryParameter("paymentDate[le]", requestParameters.getPaymentDateLe())
      .setOptionalQueryParameter("estimatedCreditDate[ge]", requestParameters.getEstimatedCreditDateGe())
      .setOptionalQueryParameter("estimatedCreditDate[le]", requestParameters.getEstimatedCreditDateLe())
      .setOptionalQueryParameter("dueDate[ge]", requestParameters.getDueDateGe())
      .setOptionalQueryParameter("dueDate[le]", requestParameters.getDueDateLe())
      .setOptionalQueryParameter("user", requestParameters.getUser());
    if (requestParameters.getBillingType() != null) {
      builder.setOptionalQueryParameter("billingType", requestParameters.getBillingType().getValue());
    }
    if (requestParameters.getStatus() != null) {
      builder.setOptionalQueryParameter("status", requestParameters.getStatus().getValue());
    }
    if (requestParameters.getInvoiceStatus() != null) {
      builder.setOptionalQueryParameter("invoiceStatus", requestParameters.getInvoiceStatus().getValue());
    }
    return builder.build();
  }

  /**
   * Create new payment
   *
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto createNewPayment() throws ApiError {
    return this.createNewPayment(ApiPaymentSaveRequestDto.builder().build());
  }

  /**
   * Create new payment
   *
   * @param apiPaymentSaveRequestDto {@link ApiPaymentSaveRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto createNewPayment(@NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCreateNewPaymentRequest(apiPaymentSaveRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Create new payment
   *
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> createNewPaymentAsync() throws ApiError {
    return this.createNewPaymentAsync(ApiPaymentSaveRequestDto.builder().build());
  }

  /**
   * Create new payment
   *
   * @param apiPaymentSaveRequestDto {@link ApiPaymentSaveRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> createNewPaymentAsync(
    @NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCreateNewPaymentRequest(apiPaymentSaveRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildCreateNewPaymentRequest(@NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setJsonContent(apiPaymentSaveRequestDto)
      .build();
  }

  /**
   * Create new payment with credit card
   *
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto createNewPaymentWithCreditCard() throws ApiError {
    return this.createNewPaymentWithCreditCard(ApiPaymentSaveWithCreditCardRequestDto.builder().build());
  }

  /**
   * Create new payment with credit card
   *
   * @param apiPaymentSaveWithCreditCardRequestDto {@link ApiPaymentSaveWithCreditCardRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto createNewPaymentWithCreditCard(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCreateNewPaymentWithCreditCardRequest(apiPaymentSaveWithCreditCardRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Create new payment with credit card
   *
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> createNewPaymentWithCreditCardAsync() throws ApiError {
    return this.createNewPaymentWithCreditCardAsync(ApiPaymentSaveWithCreditCardRequestDto.builder().build());
  }

  /**
   * Create new payment with credit card
   *
   * @param apiPaymentSaveWithCreditCardRequestDto {@link ApiPaymentSaveWithCreditCardRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> createNewPaymentWithCreditCardAsync(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCreateNewPaymentWithCreditCardRequest(apiPaymentSaveWithCreditCardRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildCreateNewPaymentWithCreditCardRequest(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setJsonContent(apiPaymentSaveWithCreditCardRequestDto)
      .build();
  }

  /**
   * Capture payment with Pre-Authorization
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto capturePaymentWithPreAuthorization(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCapturePaymentWithPreAuthorizationRequest(id, apiPaymentPathIdRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Capture payment with Pre-Authorization
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> capturePaymentWithPreAuthorizationAsync(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildCapturePaymentWithPreAuthorizationRequest(id, apiPaymentPathIdRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildCapturePaymentWithPreAuthorizationRequest(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/captureAuthorizedPayment"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentPathIdRequestDto)
      .build();
  }

  /**
   * Pay a charge with a credit card
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPayWithCreditCardRequestDto {@link ApiPaymentPayWithCreditCardRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto payAChargeWithCreditCard(
    @NonNull String id,
    @NonNull ApiPaymentPayWithCreditCardRequestDto apiPaymentPayWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildPayAChargeWithCreditCardRequest(id, apiPaymentPayWithCreditCardRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Pay a charge with a credit card
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPayWithCreditCardRequestDto {@link ApiPaymentPayWithCreditCardRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> payAChargeWithCreditCardAsync(
    @NonNull String id,
    @NonNull ApiPaymentPayWithCreditCardRequestDto apiPaymentPayWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildPayAChargeWithCreditCardRequest(id, apiPaymentPayWithCreditCardRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildPayAChargeWithCreditCardRequest(
    @NonNull String id,
    @NonNull ApiPaymentPayWithCreditCardRequestDto apiPaymentPayWithCreditCardRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/payWithCreditCard"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentPayWithCreditCardRequestDto)
      .build();
  }

  /**
   * Retrieve payment billing information
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentBillingInfoResponseDto}
   */
  public ApiPaymentBillingInfoResponseDto retrievePaymentBillingInformation(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrievePaymentBillingInformationRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentBillingInfoResponseDto>() {});
  }

  /**
   * Retrieve payment billing information
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentBillingInfoResponseDto>}
   */
  public CompletableFuture<ApiPaymentBillingInfoResponseDto> retrievePaymentBillingInformationAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrievePaymentBillingInformationRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentBillingInfoResponseDto>() {})
    );
  }

  private Request buildRetrievePaymentBillingInformationRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/billingInfo"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Payment viewing information
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentViewingInfoResponseDto}
   */
  public ApiPaymentViewingInfoResponseDto paymentViewingInformation(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildPaymentViewingInformationRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentViewingInfoResponseDto>() {});
  }

  /**
   * Payment viewing information
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentViewingInfoResponseDto>}
   */
  public CompletableFuture<ApiPaymentViewingInfoResponseDto> paymentViewingInformationAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildPaymentViewingInformationRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentViewingInfoResponseDto>() {})
    );
  }

  private Request buildPaymentViewingInformationRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/viewingInfo"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Retrieve a single payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto retrieveASinglePayment(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrieveASinglePaymentRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Retrieve a single payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> retrieveASinglePaymentAsync(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrieveASinglePaymentRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildRetrieveASinglePaymentRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Update existing payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentUpdateRequestDto {@link ApiPaymentUpdateRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto updateExistingPayment(
    @NonNull String id,
    @NonNull ApiPaymentUpdateRequestDto apiPaymentUpdateRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildUpdateExistingPaymentRequest(id, apiPaymentUpdateRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Update existing payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentUpdateRequestDto {@link ApiPaymentUpdateRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> updateExistingPaymentAsync(
    @NonNull String id,
    @NonNull ApiPaymentUpdateRequestDto apiPaymentUpdateRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildUpdateExistingPaymentRequest(id, apiPaymentUpdateRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildUpdateExistingPaymentRequest(
    @NonNull String id,
    @NonNull ApiPaymentUpdateRequestDto apiPaymentUpdateRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.PUT,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentUpdateRequestDto)
      .build();
  }

  /**
   * Delete payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentDeleteResponseDto}
   */
  public ApiPaymentDeleteResponseDto deletePayment(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildDeletePaymentRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentDeleteResponseDto>() {});
  }

  /**
   * Delete payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentDeleteResponseDto>}
   */
  public CompletableFuture<ApiPaymentDeleteResponseDto> deletePaymentAsync(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildDeletePaymentRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentDeleteResponseDto>() {})
    );
  }

  private Request buildDeletePaymentRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.DELETE,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Restore removed payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto restoreRemovedPayment(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRestoreRemovedPaymentRequest(id, apiPaymentPathIdRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Restore removed payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> restoreRemovedPaymentAsync(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRestoreRemovedPaymentRequest(id, apiPaymentPathIdRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildRestoreRemovedPaymentRequest(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/restore"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentPathIdRequestDto)
      .build();
  }

  /**
   * Retrieve status of a payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentStatusResponseDto}
   */
  public ApiPaymentStatusResponseDto retrieveStatusOfAPayment(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrieveStatusOfAPaymentRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentStatusResponseDto>() {});
  }

  /**
   * Retrieve status of a payment
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentStatusResponseDto>}
   */
  public CompletableFuture<ApiPaymentStatusResponseDto> retrieveStatusOfAPaymentAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrieveStatusOfAPaymentRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentStatusResponseDto>() {})
    );
  }

  private Request buildRetrieveStatusOfAPaymentRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/status"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Refund payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentRefundRequestDto {@link ApiPaymentRefundRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto refundPayment(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRefundPaymentRequest(id, apiPaymentRefundRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Refund payment
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentRefundRequestDto {@link ApiPaymentRefundRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> refundPaymentAsync(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRefundPaymentRequest(id, apiPaymentRefundRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildRefundPaymentRequest(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/refund"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentRefundRequestDto)
      .build();
  }

  /**
   * Get digitable bill line
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentIdentificationFieldResponseDto}
   */
  public ApiPaymentIdentificationFieldResponseDto getDigitableBillLine(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildGetDigitableBillLineRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentIdentificationFieldResponseDto>() {});
  }

  /**
   * Get digitable bill line
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentIdentificationFieldResponseDto>}
   */
  public CompletableFuture<ApiPaymentIdentificationFieldResponseDto> getDigitableBillLineAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildGetDigitableBillLineRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentIdentificationFieldResponseDto>() {})
    );
  }

  private Request buildGetDigitableBillLineRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/identificationField"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Get QR Code for Pix payments
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentPixQrCodeResponseDto}
   */
  public ApiPaymentPixQrCodeResponseDto getQrCodeForPixPayments(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildGetQrCodeForPixPaymentsRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentPixQrCodeResponseDto>() {});
  }

  /**
   * Get QR Code for Pix payments
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentPixQrCodeResponseDto>}
   */
  public CompletableFuture<ApiPaymentPixQrCodeResponseDto> getQrCodeForPixPaymentsAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildGetQrCodeForPixPaymentsRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentPixQrCodeResponseDto>() {})
    );
  }

  private Request buildGetQrCodeForPixPaymentsRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/pixQrCode"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Confirm cash receipt
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentReceiveInCashRequestDto {@link ApiPaymentReceiveInCashRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto confirmCashReceipt(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildConfirmCashReceiptRequest(id, apiPaymentReceiveInCashRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Confirm cash receipt
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentReceiveInCashRequestDto {@link ApiPaymentReceiveInCashRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> confirmCashReceiptAsync(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildConfirmCashReceiptRequest(id, apiPaymentReceiveInCashRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildConfirmCashReceiptRequest(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/receiveInCash"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentReceiveInCashRequestDto)
      .build();
  }

  /**
   * Undo cash receipt confirmation
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code ApiPaymentGetResponseDto}
   */
  public ApiPaymentGetResponseDto undoCashReceiptConfirmation(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildUndoCashReceiptConfirmationRequest(id, apiPaymentPathIdRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {});
  }

  /**
   * Undo cash receipt confirmation
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentPathIdRequestDto {@link ApiPaymentPathIdRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentGetResponseDto> undoCashReceiptConfirmationAsync(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildUndoCashReceiptConfirmationRequest(id, apiPaymentPathIdRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentGetResponseDto>() {})
    );
  }

  private Request buildUndoCashReceiptConfirmationRequest(
    @NonNull String id,
    @NonNull ApiPaymentPathIdRequestDto apiPaymentPathIdRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/undoReceivedInCash"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentPathIdRequestDto)
      .build();
  }

  /**
   * Sales simulator
   *
   * @return response of {@code ApiPaymentSimulateResponseDto}
   */
  public ApiPaymentSimulateResponseDto salesSimulator() throws ApiError {
    return this.salesSimulator(ApiPaymentSimulateRequestDto.builder().build());
  }

  /**
   * Sales simulator
   *
   * @param apiPaymentSimulateRequestDto {@link ApiPaymentSimulateRequestDto} Request Body
   * @return response of {@code ApiPaymentSimulateResponseDto}
   */
  public ApiPaymentSimulateResponseDto salesSimulator(
    @NonNull ApiPaymentSimulateRequestDto apiPaymentSimulateRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildSalesSimulatorRequest(apiPaymentSimulateRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentSimulateResponseDto>() {});
  }

  /**
   * Sales simulator
   *
   * @return response of {@code CompletableFuture<ApiPaymentSimulateResponseDto>}
   */
  public CompletableFuture<ApiPaymentSimulateResponseDto> salesSimulatorAsync() throws ApiError {
    return this.salesSimulatorAsync(ApiPaymentSimulateRequestDto.builder().build());
  }

  /**
   * Sales simulator
   *
   * @param apiPaymentSimulateRequestDto {@link ApiPaymentSimulateRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentSimulateResponseDto>}
   */
  public CompletableFuture<ApiPaymentSimulateResponseDto> salesSimulatorAsync(
    @NonNull ApiPaymentSimulateRequestDto apiPaymentSimulateRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildSalesSimulatorRequest(apiPaymentSimulateRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentSimulateResponseDto>() {})
    );
  }

  private Request buildSalesSimulatorRequest(@NonNull ApiPaymentSimulateRequestDto apiPaymentSimulateRequestDto) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/simulate"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setJsonContent(apiPaymentSimulateRequestDto)
      .build();
  }

  /**
   * Retrieve payment escrow in the Escrow Account
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentCustodyGetResponseDto}
   */
  public ApiPaymentCustodyGetResponseDto retrievePaymentEscrowInTheEscrowAccount(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrievePaymentEscrowInTheEscrowAccountRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentCustodyGetResponseDto>() {});
  }

  /**
   * Retrieve payment escrow in the Escrow Account
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentCustodyGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentCustodyGetResponseDto> retrievePaymentEscrowInTheEscrowAccountAsync(
    @NonNull String id
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRetrievePaymentEscrowInTheEscrowAccountRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentCustodyGetResponseDto>() {})
    );
  }

  private Request buildRetrievePaymentEscrowInTheEscrowAccountRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/{id}/escrow"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Recovering payment limits
   *
   * @return response of {@code ApiPaymentLimitsResponseDto}
   */
  public ApiPaymentLimitsResponseDto recoveringPaymentLimits() throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRecoveringPaymentLimitsRequest();
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLimitsResponseDto>() {});
  }

  /**
   * Recovering payment limits
   *
   * @return response of {@code CompletableFuture<ApiPaymentLimitsResponseDto>}
   */
  public CompletableFuture<ApiPaymentLimitsResponseDto> recoveringPaymentLimitsAsync() throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDtoModel.class, ApiErrorResponseDto.class);
    Request request = this.buildRecoveringPaymentLimitsRequest();
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLimitsResponseDto>() {})
    );
  }

  private Request buildRecoveringPaymentLimitsRequest() {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/payments/limits"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .build();
  }
}
