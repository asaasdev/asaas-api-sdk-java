// This file was generated by liblab | https://liblab.com/

package com.asaas.apisdk.services;

import com.asaas.apisdk.config.AsaasSdkConfig;
import com.asaas.apisdk.exceptions.ApiError;
import com.asaas.apisdk.exceptions.ApiErrorResponseDtoException;
import com.asaas.apisdk.http.Environment;
import com.asaas.apisdk.http.HttpMethod;
import com.asaas.apisdk.http.ModelConverter;
import com.asaas.apisdk.http.util.RequestBuilder;
import com.asaas.apisdk.models.ApiErrorResponseDto;
import com.asaas.apisdk.models.ApiPaymentDeleteResponseDto;
import com.asaas.apisdk.models.ApiPaymentLeanGetResponseDto;
import com.asaas.apisdk.models.ApiPaymentLeanListResponseDto;
import com.asaas.apisdk.models.ApiPaymentLeanSaveWithCreditCardResponseDto;
import com.asaas.apisdk.models.ApiPaymentReceiveInCashRequestDto;
import com.asaas.apisdk.models.ApiPaymentRefundRequestDto;
import com.asaas.apisdk.models.ApiPaymentSaveRequestDto;
import com.asaas.apisdk.models.ApiPaymentSaveWithCreditCardRequestDto;
import com.asaas.apisdk.models.ListPaymentsWithSummaryDataParameters;
import com.asaas.apisdk.validation.ViolationAggregator;
import com.asaas.apisdk.validation.exceptions.ValidationException;
import com.asaas.apisdk.validation.validators.modelValidators.ListPaymentsWithSummaryDataParametersValidator;
import com.fasterxml.jackson.core.type.TypeReference;
import java.util.Optional;
import java.util.concurrent.CompletableFuture;
import lombok.NonNull;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;

/**
 * PaymentWithSummaryDataService Service
 */
public class PaymentWithSummaryDataService extends BaseService {

  public PaymentWithSummaryDataService(@NonNull OkHttpClient httpClient, AsaasSdkConfig config) {
    super(httpClient, config);
  }

  /**
   * List payments with summary data
   *
   * @return response of {@code ApiPaymentLeanListResponseDto}
   */
  public ApiPaymentLeanListResponseDto listPaymentsWithSummaryData() throws ApiError, ValidationException {
    return this.listPaymentsWithSummaryData(ListPaymentsWithSummaryDataParameters.builder().build());
  }

  /**
   * List payments with summary data
   *
   * @param requestParameters {@link ListPaymentsWithSummaryDataParameters} Request Parameters Object
   * @return response of {@code ApiPaymentLeanListResponseDto}
   */
  public ApiPaymentLeanListResponseDto listPaymentsWithSummaryData(
    @NonNull ListPaymentsWithSummaryDataParameters requestParameters
  ) throws ApiError, ValidationException {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildListPaymentsWithSummaryDataRequest(requestParameters);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanListResponseDto>() {});
  }

  /**
   * List payments with summary data
   *
   * @return response of {@code CompletableFuture<ApiPaymentLeanListResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanListResponseDto> listPaymentsWithSummaryDataAsync()
    throws ApiError, ValidationException {
    return this.listPaymentsWithSummaryDataAsync(ListPaymentsWithSummaryDataParameters.builder().build());
  }

  /**
   * List payments with summary data
   *
   * @param requestParameters {@link ListPaymentsWithSummaryDataParameters} Request Parameters Object
   * @return response of {@code CompletableFuture<ApiPaymentLeanListResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanListResponseDto> listPaymentsWithSummaryDataAsync(
    @NonNull ListPaymentsWithSummaryDataParameters requestParameters
  ) throws ApiError, ValidationException {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildListPaymentsWithSummaryDataRequest(requestParameters);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanListResponseDto>() {})
    );
  }

  private Request buildListPaymentsWithSummaryDataRequest(
    @NonNull ListPaymentsWithSummaryDataParameters requestParameters
  ) throws ValidationException {
    new ViolationAggregator()
      .add(
        new ListPaymentsWithSummaryDataParametersValidator("requestParameters").optional().validate(requestParameters)
      )
      .validateAll();
    RequestBuilder builder = new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setOptionalQueryParameter("offset", requestParameters.getOffset())
      .setOptionalQueryParameter("limit", requestParameters.getLimit())
      .setOptionalQueryParameter("customer", requestParameters.getCustomer())
      .setOptionalQueryParameter("customerGroupName", requestParameters.getCustomerGroupName())
      .setOptionalQueryParameter("subscription", requestParameters.getSubscription())
      .setOptionalQueryParameter("installment", requestParameters.getInstallment())
      .setOptionalQueryParameter("externalReference", requestParameters.getExternalReference())
      .setOptionalQueryParameter("paymentDate", requestParameters.getPaymentDate())
      .setOptionalQueryParameter("estimatedCreditDate", requestParameters.getEstimatedCreditDate())
      .setOptionalQueryParameter("pixQrCodeId", requestParameters.getPixQrCodeId())
      .setOptionalQueryParameter("anticipated", requestParameters.getAnticipated())
      .setOptionalQueryParameter("anticipable", requestParameters.getAnticipable())
      .setOptionalQueryParameter("dateCreated[ge]", requestParameters.getDateCreatedGe())
      .setOptionalQueryParameter("dateCreated[le]", requestParameters.getDateCreatedLe())
      .setOptionalQueryParameter("paymentDate[ge]", requestParameters.getPaymentDateGe())
      .setOptionalQueryParameter("paymentDate[le]", requestParameters.getPaymentDateLe())
      .setOptionalQueryParameter("estimatedCreditDate[ge]", requestParameters.getEstimatedCreditDateGe())
      .setOptionalQueryParameter("estimatedCreditDate[le]", requestParameters.getEstimatedCreditDateLe())
      .setOptionalQueryParameter("dueDate[ge]", requestParameters.getDueDateGe())
      .setOptionalQueryParameter("dueDate[le]", requestParameters.getDueDateLe())
      .setOptionalQueryParameter("user", requestParameters.getUser());
    if (requestParameters.getBillingType() != null) {
      builder.setOptionalQueryParameter("billingType", requestParameters.getBillingType().getValue());
    }
    if (requestParameters.getStatus() != null) {
      builder.setOptionalQueryParameter("status", requestParameters.getStatus().getValue());
    }
    if (requestParameters.getInvoiceStatus() != null) {
      builder.setOptionalQueryParameter("invoiceStatus", requestParameters.getInvoiceStatus().getValue());
    }
    return builder.build();
  }

  /**
   * Create new payment with summary data in response
   *
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto createNewPaymentWithSummaryDataInResponse() throws ApiError {
    return this.createNewPaymentWithSummaryDataInResponse(ApiPaymentSaveRequestDto.builder().build());
  }

  /**
   * Create new payment with summary data in response
   *
   * @param apiPaymentSaveRequestDto {@link ApiPaymentSaveRequestDto} Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto createNewPaymentWithSummaryDataInResponse(
    @NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildCreateNewPaymentWithSummaryDataInResponseRequest(apiPaymentSaveRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Create new payment with summary data in response
   *
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> createNewPaymentWithSummaryDataInResponseAsync()
    throws ApiError {
    return this.createNewPaymentWithSummaryDataInResponseAsync(ApiPaymentSaveRequestDto.builder().build());
  }

  /**
   * Create new payment with summary data in response
   *
   * @param apiPaymentSaveRequestDto {@link ApiPaymentSaveRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> createNewPaymentWithSummaryDataInResponseAsync(
    @NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildCreateNewPaymentWithSummaryDataInResponseRequest(apiPaymentSaveRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildCreateNewPaymentWithSummaryDataInResponseRequest(
    @NonNull ApiPaymentSaveRequestDto apiPaymentSaveRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setJsonContent(apiPaymentSaveRequestDto)
      .build();
  }

  /**
   * Create new payment with credit card with summary data in response
   *
   * @return response of {@code ApiPaymentLeanSaveWithCreditCardResponseDto}
   */
  public ApiPaymentLeanSaveWithCreditCardResponseDto createNewPaymentWithCreditCardWithSummaryDataInResponse()
    throws ApiError {
    return this.createNewPaymentWithCreditCardWithSummaryDataInResponse(
        ApiPaymentSaveWithCreditCardRequestDto.builder().build()
      );
  }

  /**
   * Create new payment with credit card with summary data in response
   *
   * @param apiPaymentSaveWithCreditCardRequestDto {@link ApiPaymentSaveWithCreditCardRequestDto} Request Body
   * @return response of {@code ApiPaymentLeanSaveWithCreditCardResponseDto}
   */
  public ApiPaymentLeanSaveWithCreditCardResponseDto createNewPaymentWithCreditCardWithSummaryDataInResponse(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request =
      this.buildCreateNewPaymentWithCreditCardWithSummaryDataInResponseRequest(apiPaymentSaveWithCreditCardRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanSaveWithCreditCardResponseDto>() {});
  }

  /**
   * Create new payment with credit card with summary data in response
   *
   * @return response of {@code CompletableFuture<ApiPaymentLeanSaveWithCreditCardResponseDto>}
   */
  public CompletableFuture<
    ApiPaymentLeanSaveWithCreditCardResponseDto
  > createNewPaymentWithCreditCardWithSummaryDataInResponseAsync() throws ApiError {
    return this.createNewPaymentWithCreditCardWithSummaryDataInResponseAsync(
        ApiPaymentSaveWithCreditCardRequestDto.builder().build()
      );
  }

  /**
   * Create new payment with credit card with summary data in response
   *
   * @param apiPaymentSaveWithCreditCardRequestDto {@link ApiPaymentSaveWithCreditCardRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanSaveWithCreditCardResponseDto>}
   */
  public CompletableFuture<
    ApiPaymentLeanSaveWithCreditCardResponseDto
  > createNewPaymentWithCreditCardWithSummaryDataInResponseAsync(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request =
      this.buildCreateNewPaymentWithCreditCardWithSummaryDataInResponseRequest(apiPaymentSaveWithCreditCardRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanSaveWithCreditCardResponseDto>() {})
    );
  }

  private Request buildCreateNewPaymentWithCreditCardWithSummaryDataInResponseRequest(
    @NonNull ApiPaymentSaveWithCreditCardRequestDto apiPaymentSaveWithCreditCardRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setJsonContent(apiPaymentSaveWithCreditCardRequestDto)
      .build();
  }

  /**
   * Capture payment with Pre-Authorization with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto capturePaymentWithPreAuthorizationWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildCapturePaymentWithPreAuthorizationWithSummaryDataInResponseRequest(id, input);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Capture payment with Pre-Authorization with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<
    ApiPaymentLeanGetResponseDto
  > capturePaymentWithPreAuthorizationWithSummaryDataInResponseAsync(@NonNull String id, @NonNull Object input)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildCapturePaymentWithPreAuthorizationWithSummaryDataInResponseRequest(id, input);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildCapturePaymentWithPreAuthorizationWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull Object input
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}/captureAuthorizedPayment"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(input)
      .build();
  }

  /**
   * Retrieve a single payment with summary data
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto retrieveASinglePaymentWithSummaryData(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRetrieveASinglePaymentWithSummaryDataRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Retrieve a single payment with summary data
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> retrieveASinglePaymentWithSummaryDataAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRetrieveASinglePaymentWithSummaryDataRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildRetrieveASinglePaymentWithSummaryDataRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.GET,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Update existing payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto updateExistingPaymentWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildUpdateExistingPaymentWithSummaryDataInResponseRequest(id, input);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Update existing payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> updateExistingPaymentWithSummaryDataInResponseAsync(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildUpdateExistingPaymentWithSummaryDataInResponseRequest(id, input);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildUpdateExistingPaymentWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull Object input
  ) {
    return new RequestBuilder(
      HttpMethod.PUT,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(input)
      .build();
  }

  /**
   * Delete payment with summary data
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code ApiPaymentDeleteResponseDto}
   */
  public ApiPaymentDeleteResponseDto deletePaymentWithSummaryData(@NonNull String id) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildDeletePaymentWithSummaryDataRequest(id);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentDeleteResponseDto>() {});
  }

  /**
   * Delete payment with summary data
   *
   * @param id String Unique payment identifier in Asaas
   * @return response of {@code CompletableFuture<ApiPaymentDeleteResponseDto>}
   */
  public CompletableFuture<ApiPaymentDeleteResponseDto> deletePaymentWithSummaryDataAsync(@NonNull String id)
    throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildDeletePaymentWithSummaryDataRequest(id);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentDeleteResponseDto>() {})
    );
  }

  private Request buildDeletePaymentWithSummaryDataRequest(@NonNull String id) {
    return new RequestBuilder(
      HttpMethod.DELETE,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .build();
  }

  /**
   * Restore removed payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto restoreRemovedPaymentWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRestoreRemovedPaymentWithSummaryDataInResponseRequest(id, input);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Restore removed payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> restoreRemovedPaymentWithSummaryDataInResponseAsync(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRestoreRemovedPaymentWithSummaryDataInResponseRequest(id, input);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildRestoreRemovedPaymentWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull Object input
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}/restore"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(input)
      .build();
  }

  /**
   * Refund payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentRefundRequestDto {@link ApiPaymentRefundRequestDto} Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto refundPaymentWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRefundPaymentWithSummaryDataInResponseRequest(id, apiPaymentRefundRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Refund payment with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentRefundRequestDto {@link ApiPaymentRefundRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> refundPaymentWithSummaryDataInResponseAsync(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildRefundPaymentWithSummaryDataInResponseRequest(id, apiPaymentRefundRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildRefundPaymentWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull ApiPaymentRefundRequestDto apiPaymentRefundRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}/refund"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentRefundRequestDto)
      .build();
  }

  /**
   * Confirm cash receipt with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentReceiveInCashRequestDto {@link ApiPaymentReceiveInCashRequestDto} Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto confirmCashReceiptWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request =
      this.buildConfirmCashReceiptWithSummaryDataInResponseRequest(id, apiPaymentReceiveInCashRequestDto);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Confirm cash receipt with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param apiPaymentReceiveInCashRequestDto {@link ApiPaymentReceiveInCashRequestDto} Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> confirmCashReceiptWithSummaryDataInResponseAsync(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request =
      this.buildConfirmCashReceiptWithSummaryDataInResponseRequest(id, apiPaymentReceiveInCashRequestDto);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildConfirmCashReceiptWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull ApiPaymentReceiveInCashRequestDto apiPaymentReceiveInCashRequestDto
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}/receiveInCash"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(apiPaymentReceiveInCashRequestDto)
      .build();
  }

  /**
   * Undo cash receipt confirmation with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code ApiPaymentLeanGetResponseDto}
   */
  public ApiPaymentLeanGetResponseDto undoCashReceiptConfirmationWithSummaryDataInResponse(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildUndoCashReceiptConfirmationWithSummaryDataInResponseRequest(id, input);
    Response response = this.execute(request);
    return ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {});
  }

  /**
   * Undo cash receipt confirmation with summary data in response
   *
   * @param id String Unique payment identifier in Asaas
   * @param input Object Request Body
   * @return response of {@code CompletableFuture<ApiPaymentLeanGetResponseDto>}
   */
  public CompletableFuture<ApiPaymentLeanGetResponseDto> undoCashReceiptConfirmationWithSummaryDataInResponseAsync(
    @NonNull String id,
    @NonNull Object input
  ) throws ApiError {
    this.addErrorMapping(400, ApiErrorResponseDto.class, ApiErrorResponseDtoException.class);
    Request request = this.buildUndoCashReceiptConfirmationWithSummaryDataInResponseRequest(id, input);
    CompletableFuture<Response> futureResponse = this.executeAsync(request);
    return futureResponse.thenApplyAsync(response ->
      ModelConverter.convert(response, new TypeReference<ApiPaymentLeanGetResponseDto>() {})
    );
  }

  private Request buildUndoCashReceiptConfirmationWithSummaryDataInResponseRequest(
    @NonNull String id,
    @NonNull Object input
  ) {
    return new RequestBuilder(
      HttpMethod.POST,
      Optional.ofNullable(this.config.getBaseUrl()).orElse(Environment.DEFAULT.getUrl()),
      "v3/lean/payments/{id}/undoReceivedInCash"
    )
      .setApiKeyAuth(this.config.getApiKeyAuthConfig())
      .setPathParameter("id", id)
      .setJsonContent(input)
      .build();
  }
}
